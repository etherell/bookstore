%header.navbar.navbar-default
  .container
    .navbar-header
      %button.navbar-toggle.pull-left{ type: 'button', 'data-toggle': 'collapse', 'data-target': '#navbar' }
        %span.sr-only
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      = link_to t('.bookstore'), root_path, class: 'navbar-brand'
      %a.shop-link.pull-right.visible-xs{ href: '#' }
        %span.shop-icon
          %span.shop-quantity 3
    %a.shop-link.pull-right.hidden-xs{ href: '#' }
      %span.shop-icon
        %span.shop-quantity 3
    .navbar-collapse.collapse.pl-30#navbar{ 'aria-expanded': 'false' }
      .visible-xs
        %button.close{ type: 'button', 'aria-label': 'Close' }
          %span{ 'aria-hidden': 'true' } &times;
        %ul.nav.navbar-nav
          %li
            = link_to t('.home'), root_path, class: 'home-link'
          %li
            = link_to(t('.shop'), '#menu', type: 'button', 'data-toggle': 'collapse',
                      'aria-expanded': 'false', 'aria-controls': 'menu', class: 'shop-header-link')
            %ul.collapse.list-unstyled.pl-30.mb-10#menu{ 'aria-expanded': 'false' }
              - categories.each do |category|
                %li
                  = link_to category.title, books_path(category_id: category.id), class: 'collapse-link'
          - if current_user
            %li
              = link_to t('.settings'), new_address_path, class: 'settings-link'
            %li
              = link_to t('.log_out'), destroy_user_session_path, method: 'delete', class: 'log-out-link'
          - else
            %li
              = link_to t('.log_in'), new_user_session_path, class: 'my-account-link'
            %li
              = link_to t('.sign_up'), new_user_registration_path, class: 'sign-up-link'
      .hidden-xs
        %ul.nav.navbar-nav
          %li
            = link_to t('.home'), root_path, class: 'home-link'
          %li.dropdown
            = link_to(t('.shop'), '#', 'data-toggle': 'dropdown', role: 'button', 'aria-haspopup': 'true',
                      'aria-expanded': 'false', class: 'dropdown-toggle shop-header-link')
            %ul.dropdown-menu
              - categories.each do |category|
                %li
                  = link_to category.title, books_path(category_id: category.id), class: 'collapse-link'
          - unless current_user
            %li
              = link_to t('.log_in'), new_user_session_path, class: 'log-in-link'
            %li
              = link_to t('.sign_up'), new_user_registration_path, class: 'sign-up-link'
          - if current_user
            %li.dropdown
              = link_to(t('.my_account'), '#', 'data-toggle': 'dropdown', role: 'button', 'aria-haspopup': 'true',
                       'aria-expanded': 'false', class: 'my-account-link dropdown-toggle')
              %ul.dropdown-menu
                %li
                  = link_to t('.settings'), new_address_path, class: 'collapse-link settings-link'
                %li
                  = link_to(t('.log_out'), destroy_user_session_path, method: 'delete',
                            class: 'collapse-link log-out-link')
